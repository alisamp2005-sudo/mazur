# VoximPlant + ElevenLabs Admin Panel - Setup Guide

## üéâ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∏–µ–π VoximPlant —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π ElevenLabs AI –∞–≥–µ–Ω—Ç–æ–≤.

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–ï–¥–∏–Ω–∏—á–Ω—ã–µ –∑–≤–æ–Ω–∫–∏** - –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
2. **–ú–∞—Å—Å–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏** - –æ–±–∑–≤–æ–Ω —Å–ø–∏—Å–∫–∞ –Ω–æ–º–µ—Ä–æ–≤
3. **–û—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
4. **–ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤** - –≤—Å–µ –∑–≤–æ–Ω–∫–∏ —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞–º–∏
5. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /home/ubuntu/mazur
pnpm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∫–∞–º–ø–∞–Ω–∏–π:

```bash
mysql -u root mazur < migrations/003_add_campaigns.sql
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —Ñ–∞–π–ª–µ –µ—Å—Ç—å:

```env
# Database
DATABASE_HOST=localhost
DATABASE_USER=root
DATABASE_PASSWORD=
DATABASE_NAME=mazur

# VoximPlant
VOXIMPLANT_ACCOUNT_ID=10266354
VOXIMPLANT_API_KEY=96760ec5-b82e-4e4f-95fa-ab4b56e25cfd

# ElevenLabs
ELEVENLABS_API_KEY=sk_d6055dbf82bc1fadc0d8ff2ae39598a51209e2d2c79b3c14
ELEVENLABS_AGENT_ID=agent_8301kfgw54f5eekabw8htz6ekgnw
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
pnpm dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3000`

---

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–¥–µ–ª–∞—Ç—å –µ–¥–∏–Ω–∏—á–Ω—ã–π –∑–≤–æ–Ω–æ–∫

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–ó–≤–æ–Ω–∫–∏" ‚Üí "–°–¥–µ–ª–∞—Ç—å –∑–≤–æ–Ω–æ–∫"** (`/calls/make`)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `+79854619523`)
4. –í–≤–µ–¥–∏—Ç–µ Caller ID (–≤–∞—à VoximPlant –Ω–æ–º–µ—Ä: `+79011478030`)
5. –ù–∞–∂–º–∏—Ç–µ **"–ü–æ–∑–≤–æ–Ω–∏—Ç—å"**

### –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–ö–∞–º–ø–∞–Ω–∏–∏"** (`/campaigns`)
2. –ù–∞–∂–º–∏—Ç–µ **"+ –ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏
5. –í—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)
6. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é"**
7. –£–∫–∞–∂–∏—Ç–µ Caller ID –∏ –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –∑–≤–æ–Ω–∫–∞–º–∏
8. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é"**

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–û—Ç—á–µ—Ç—ã"** (`/reports`)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ (—Å–µ–≥–æ–¥–Ω—è, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –≤—Å–µ –≤—Ä–µ–º—è)
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤
   - –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
   - –°—Ä–µ–¥–Ω—é—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –°—Ç–æ–∏–º–æ—Å—Ç—å
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞–º–ø–∞–Ω–∏—è–º
   - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–≤–æ–Ω–∫–∏

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (tRPC API)

**–§–∞–π–ª—ã:**
- `server/routers/voximplant.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- `server/routers/campaigns.ts` - –µ–¥–∏–Ω–∏—á–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ –∏ –∫–∞–º–ø–∞–Ω–∏–∏
- `server/voximplant-api.ts` - –∫–ª–∏–µ–Ω—Ç VoximPlant API
- `server/voximplant-db.ts` - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**API Endpoints:**

```typescript
// –ï–¥–∏–Ω–∏—á–Ω—ã–π –∑–≤–æ–Ω–æ–∫
campaigns.makeSingleCall({ applicationId, phoneNumber, callerId })

// –°–æ–∑–¥–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
campaigns.createCampaign({ applicationId, campaignName, phoneNumbers })

// –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
campaigns.startCampaign({ campaignId, phoneNumbers, callerId, delayBetweenCalls })

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
voximplant.getStats({ applicationId, startDate, endDate })
```

### Frontend (React + TypeScript)

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- `client/src/pages/calls/MakeCall.tsx` - —Ñ–æ—Ä–º–∞ –¥–ª—è –µ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
- `client/src/pages/campaigns/BulkCampaign.tsx` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏
- `client/src/pages/campaigns/CampaignsList.tsx` - —Å–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π
- `client/src/pages/reports/ReportsDashboard.tsx` - –æ—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Database Schema

**–¢–∞–±–ª–∏—Ü—ã:**

```sql
-- –ö–∞–º–ø–∞–Ω–∏–∏
call_campaigns (
  id, application_id, campaign_name, status,
  total_numbers, completed_calls, successful_calls, failed_calls,
  created_at, updated_at, started_at, completed_at
)

-- –ó–≤–æ–Ω–∫–∏
voximplant_calls (
  id, application_id, campaign_id, call_session_history_id,
  phone_number, caller_id, direction, status,
  duration, cost, start_time, end_time, recording_url
)
```

---

## üéØ –ö–ª—é—á–µ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–≤–æ–Ω–∫–∏ –æ—Ç–∫–ª—é—á–∞–ª–∏—Å—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –í VoxEngine —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ñ—É–Ω–∫—Ü–∏—è `ElevenLabs.createAgentsClient()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise, –Ω–æ –∫–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `await`.

**–ë—ã–ª–æ:**
```javascript
agentsClient = ElevenLabs.createAgentsClient(parameters);
```

**–°—Ç–∞–ª–æ:**
```javascript
agentsClient = await ElevenLabs.createAgentsClient(parameters);
```

–¢–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è:
- **–í—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤** (`AppEvents.CallAlerting`)
- **–ò—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤** (`AppEvents.Started` + `VoxEngine.callPSTN()`)

---

## üìä –§—É–Ω–∫—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤

### –ú–µ—Ç—Ä–∏–∫–∏

- **–í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞ –ø–µ—Ä–∏–æ–¥
- **–£—Å–ø–µ—à–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤** - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã
- **–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- **–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å** - –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –∑–≤–æ–Ω–∫–∏

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

- **–ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- **–¢–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–≤–æ–Ω–∫–æ–≤** - –¥–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ –∑–≤–æ–Ω–∫–∞

### –§–∏–ª—å—Ç—Ä—ã

- –°–µ–≥–æ–¥–Ω—è
- –ù–µ–¥–µ–ª—è
- –ú–µ—Å—è—Ü
- –í—Å–µ –≤—Ä–µ–º—è

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ API endpoints –∑–∞—â–∏—â–µ–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod schemas
- SQL injection –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ prepared statements

---

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Bull/BullMQ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
2. **Rate limiting** - –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ VoximPlant API
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–ª–µ—Ä—Ç—ã
4. **Backup** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
5. **SSL** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è production

---

## üìû –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

- **VoximPlant –Ω–æ–º–µ—Ä:** +79011478030
- **–¢–µ—Å—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä:** +79854619523
- **Account ID:** 10266354
- **Agent ID:** agent_8301kfgw54f5eekabw8htz6ekgnw

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –í—ã –º–æ–∂–µ—Ç–µ:

‚úÖ –î–µ–ª–∞—Ç—å –µ–¥–∏–Ω–∏—á–Ω—ã–µ –∑–≤–æ–Ω–∫–∏  
‚úÖ –ó–∞–ø—É—Å–∫–∞—Ç—å –º–∞—Å—Å–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏  
‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã  
‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É  
‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏  

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã!** üöÄ
